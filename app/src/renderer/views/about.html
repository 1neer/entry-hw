<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>엔트리</title>
	<link rel='stylesheet' href='../css/about.css' />
</head>

<body>
	<div class="container">
		<div class="container_inner">
			<div class="logo_wrapper">
				<img src="../images/about/logo.png" class="logo" />
			</div>
			<div>
				<div class="txtVersion">
					Version
					<span id="version"></span>
					<br/>
					<a href="#" id="playEntryBtn">
						https://playentry.org
					</a>
				</div>
				<div>
					<div class="btnVersionUpdate">
					</div>
					<div class="txtAlreadyVersion">
					</div>
				</div>
			</div>
		</div>
	</div>
	<script src="../js/jquery-1.11.3.min.js"></script>
	<script>
		const Lang = preload.Lang;
		const ipcRenderer = preload.ipcRenderer;
		const aboutWindow = preload.getAboutWindow();
		const hardwareVersion = preload.hardwareVersion;
		if(!localStorage.getItem('lang')) {
			localStorage.setItem('lang', 'ko');
		}

		$(function () {
			$('body').on('click', function () {
				aboutWindow.hide();
			});

			$('#playEntryBtn').on('click', function (e) {
				e.preventDefault();
				preload.openExternal('https://playentry.org');
			});

			$('.btnVersionUpdate').on('click', () => {
				preload.openExternal(
					'https://playentry.org/#!/offlineEditor'
				);
			});

			$("#version").text(hardwareVersion);

			aboutWindow.on('show', () => {
				$(".btnVersionUpdate").text(Lang.General.recent_download2);
				$(".txtAlreadyVersion").text(Lang.General.latest_version);

				ipcRenderer.once('checkVersionResult', (e, hasNewVersion) => {
					if (hasNewVersion) {
						$('.txtAlreadyVersion').hide();
						$('.btnVersionUpdate').show();
					} else {
						$('.btnVersionUpdate').hide();
						$('.txtAlreadyVersion').show();
					}
				});

				const lastCheckVersion =
					localStorage.getItem('lastCheckVersion') || '0.0.0';

				ipcRenderer.send('checkVersion', lastCheckVersion);
			});
		});
	</script>
</body>

</html>
